layers:
    landuse:
        data: { source: mapzen }
        draw:
            landuse-elevation-stripes:
                order: global.order
                visible: false
        tier1:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 3 },  area: { min: 300000000 } }
                    - { $zoom: { min: 4 },  area: { min: 300000000 } }
                    - { $zoom: { min: 5 },  area: { min: 150000000 } }
                    - { $zoom: { min: 6 },  area: { min: 150000000 } }
                    - { $zoom: { min: 7 },  area: { min: 100000000 } }
                    - { $zoom: { min: 8 },  area: { min: 10000000 } }
                    - { $zoom: { min: 9 },  area: { min: 5000000 } }
                    - { $zoom: { min: 10 }, area: { min: 1000000 } }
                    - { $zoom: { min: 11 }, area: { min: 500000 } }
                    - { $zoom: { min: 12 }, area: { min: 500000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 50000 } }
                    - { $zoom: { min: 15 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
            national_park:
                filter: { kind: [national_park, "park or protected land", battlefield], not: { operator: [ "United States Forest Service", "US Forest Service", "U.S. Forest Service", "USDA Forest Service" ] } }
                draw:
                    landuse-elevation-stripes:
                        # color: [0.263,0.933,0.494]
                        color: [0.402,0.568,0.818]
                        order: 18
                        visible: true
                us_national_park:
                    # yosemite national park, death valley national park, grand canyon national park
                    filter: { operator: [ "United States National Park Service", "US National Park Service" ] }
                    draw:
                        landuse-elevation-stripes:
                            color: [0.214,0.690,0.611]
                            visible: true
        tier2:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 4 },  area: { min: 1000000000 } }
                    - { $zoom: { min: 5 },  area: { min: 1000000000 } }
                    - { $zoom: { min: 6 },  area: { min: 150000000 } }
                    - { $zoom: { min: 7 },  area: { min: 100000000 } }
                    - { $zoom: { min: 8 },  area: { min: 10000000 } }
                    - { $zoom: { min: 9 },  area: { min: 5000000 } }
                    - { $zoom: { min: 10 }, area: { min: 1000000 } }
                    - { $zoom: { min: 11 }, area: { min: 500000 } }
                    - { $zoom: { min: 12 }, area: { min: 250000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 50000 } }
                    - { $zoom: { min: 15 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
            conservation:
                filter:
                    kind: [conservation, protected_area, nature_reserve]
                    $zoom: { min: 4 }
                draw:
                    landuse-elevation-stripes:
                        color: [0.214,0.690,0.611]
                        visible: true
                wilderness-areas:
                    filter: function() { return feature.name && feature.name.indexOf("Wilderness") > -1 }
                    draw:
                        landuse-stripes:
                            order: 25
                            color: [0.239,0.329,0.463]
                            visible: true
                # national_forest_level_6:
                #     filter: { protect_class: ["6",6] }
                #     draw:
                #         landuse-stripes:
                #             color: red
                #             visible: true
            farm:
                filter:
                    kind: [farm, farmland]
                    $zoom: { min: 10}
                draw:
                    farm-stripes:
                        color: [0.174,0.462,0.527]
                        visible: true
            forest:
                filter: { kind: [forest,wood], $zoom: { min: 6 } }
                national-forest:
                    filter:
                        operator: [ "United States Forest Service", "US Forest Service", "U.S. Forest Service", "USDA Forest Service" ]
                    draw:
                        polygons:
                            color: red
                            visible: true

                landuse-forest:
                    filter:
                        not: { operator: [ "United States Forest Service", "US Forest Service", "U.S. Forest Service", "USDA Forest Service" ] }
                        $zoom: { min: 6 }
                    draw:
                        landuse-elevation-stripes:
                            color: [0.214,0.690,0.611]
                            visible: true

            parks-and-national-forests-not-national-park:
                filter: { $zoom: { min: 4 }, kind: [park, national_park, "park or protected land", battlefield], not: { operator: [ "United States National Park Service", "US National Park Service" ] } }
                # default for national forests and more?
                draw:
                    landuse-elevation-stripes:
                        color: [0.225,0.597,0.681]
                        visible: true



styles:
    farm-stripes:
        mix: [stripes]
        blend: overlay
        shaders:
            defines:
                STRIPES_IN: 10.
                STRIPES_OUT: 20.
                STRIPES_ANGLE: 0.95
                STRIPES_MAX: -.025
                STRIPES_ALPHA: .5
    landuse-stripes:
        mix: [stripes]
        blend: overlay
        shaders:
            defines:
                STRIPES_IN: 10.
                STRIPES_OUT: 20.
                STRIPES_ANGLE: 0.45
                STRIPES_MAX: -.025
                STRIPES_ALPHA: .8
    landuse-elevation-stripes:
        base: polygons
        mix: [elevation-stripes]
        shaders:
            defines:
                STRIPES_ALPHA: .5
                STRIPES_SCALE: 4.
                STRIPES_PCT: 1.7