layers:
    roads:
        data: { source: mapzen }
        filter: { not: { kind: rail } }
        draw:
            lines:
                width: 1px
                order: global.order
                outline:
                    order: 352
        early:
            filter: { $zoom: { max: 15} }
            draw:
                lines:
                    outline:
                        order: global.order
        bridges_and_tunnels:
            filter: { any: [is_bridge: yes, is_tunnel: yes] }
            draw:
                lines:
                    outline:
                        order: global.order
        natural_earth_highways:
            filter: { source: 'naturalearthdata.com' }
            draw:
                lines:
                    style: roads-glow
                    # color: [[5,[0.463,0.800,0.824]],[6,[0.541,0.969,0.949]]]
                    # width: [[5,0.5px],[6,10px]]
                    color: [0.463,0.800,0.824]
                    width: [[5,1.5px],[7,5px]]

                    # outline:
                    #     color: [0.541,0.969,0.949]
                    #     width: [[5,0px],[6,0px]]
            major_road:
                filter: { type: ['Secondary Highway','Road'] }
                draw:
                    lines:
                        color: [[5,[0.463,0.800,0.824]],[6,[0.541,0.969,0.949]]]
                        width: [[5,0.5px],[6,0.75px]]
                        # outline:
                        #     width: 1px
            minor_road:
                filter: { type: 'Unknown' }
                draw:
                    lines:
                        color: [0.333,0.518,0.612]
                        width: 0.5px

        highway:
            filter: { kind: highway }
            highway-z8:
                filter:
                    $zoom: { min: 8, max: 11 }
                draw:
                    lines:
                        style: roads-glow
                        color: [0.463,0.800,0.824]
                        width: [[8,5px],[11,9px]]

            highway-z11:
                filter:
                    $zoom: { min: 11 }
                draw:
                    lines:
                        color: [0.086,0.135,0.260]
                        width: [[8,0px],[9,0.25px],[10,1px],[12,1px],[13,2px],[14,3px],[15,4px],[16,5px],[17,3px],[18,6px],[19,12px]]
                        outline:
                            # color: [0.541,0.969,0.949]
                            color: [0.689,0.970,0.956]
                            width: [[8,0.5px],[9,1px],[12,1.25px],[15,1.5px],[16,1.5px],[17,0px]]
                    highway-dashed:
                        order: global.order_sub_1
                        # color: [0.557,0.909,0.887]
                        color: [0.306,0.361,0.949]
                        width: [[8,0px],[16,0px],[17,7px],[18,10px],[19,20px]]
                    highway-glow:
                        order: global.order_sub_6
                        color: [0.800,1.000,0.987]
                        width: [[11,8px],[13,12px],[16,25px],[17,40px],[18,50px],[19,80px]]

                highway-link:
                    filter: { is_link: yes } # on- and off-ramps, etc
                    draw:
                        lines:
                            width: [[8,0px],[9,0px],[11,0.25px],[12,0.25px],[13,1px],[14,1.5px],[15,2px],[17,3px]]
                            outline:
                                color: [0.481,0.842,0.890]
                                width: [[8,0px],[9,0.5px],[15,1px]]
                        highway-dashed:
                            visible: false
                        highway-casing1:
                            visible: false
                        highway-casing2:
                            visible: false
                        highway-casing3:
                            visible: false
                        highway-casing4:
                            visible: false
                        highway-glow:
                            visible: false


                    highway-link-early:
                        filter: { $zoom: { min: 13, max: 15 } }
                        draw:
                            lines:
                                order: 352
                            highway-dashed:
                                visible: false
                        highway-link-early-z17-18:
                            filter: { $zoom: [17, 18]}
                            draw:
                                lines:
                                    visible: false

                highway-tunnel:
                    filter: { is_tunnel: yes, $zoom: { min: 13 } }
                    draw:
                        lines:
                            color: [0.201,0.286,0.409]
                            outline:
                                # color: [0.373,0.673,0.657]
                                color: [[13,[0.276,0.568,0.950]],[18,[0.073,0.435,0.908]]]
                        highway-dashed:
                            visible: false
                        highway-glow:
                            color: [0.059,0.000,0.953]
                        highway-casing1:
                            visible: false
                        highway-casing2:
                            visible: false
                        highway-casing3:
                            visible: false
                        highway-casing4:
                            visible: false
                    highway-tunnel-z17-18:
                        filter: { $zoom: { min: 16 } }
                        draw:
                            lines:
                                width: [[16,5px],[17,12px],[18,15px],[19,28px]]
                                outline:
                                    width: [[16,1.5px],[17,2px],[18,6px],[19,9px]]

            # Show 0 width roads one zoom before they have width, so they can scale up instead of popping in
            highway-z17:
                filter: 
                    $zoom: { min: 16 }
                draw:
                    highway-casing1:
                        style: lines
                        order: global.order_sub_2
                        color: [0.086,0.135,0.260]
                        width: [[8,0px],[16,0px],[17,12px],[18,15px],[19,28px]]
                    highway-casing2:
                        style: lines
                        order: global.order_sub_3
                        color: [0.541,0.969,0.949]
                        width: [[8,0px],[16,0px],[17,16px],[18,18px],[19,31px]]


            highway-z18:
                filter: 
                    $zoom: { min: 17 }
                draw:
                    highway-casing3:
                        style: lines
                        order: global.order_sub_4
                        color: [0.086,0.135,0.260]
                        width: [[8,0px],[16,0px],[17,15px],[18,22px],[19,40px]]
                    highway-casing4:
                        style: lines
                        order: global.order_sub_5
                        color: [0.800,1.000,0.987]
                        width: [[8,0px],[16,0px],[17,15px],[18,26px],[19,45px]]


        major_road:
            filter: { kind: major_road }
            draw:
                lines:
                    color: [0.086,0.135,0.260]
                    width: 0.15
                    outline:
                        color: [[8,[0.278,0.499,0.667]],[12,[0.329,0.588,0.784]]]
                        width: 0.3px
            major_road-trunk_primary:
                filter: { highway: [trunk, primary] }
                draw:
                    lines:
                        color: [0.086,0.135,0.260]
                        width: [[8,0.1px],[9,0.1px],[11,0.1px],[12,0.75px],[13,1px],[14,2px],[15,3px]]
                        outline:
                            color: [[8,[0.329,0.588,0.784]],[11,[0.418,0.754,0.736]],[14,[0.510,0.920,0.897]]]
                            width: [[8,0.25px],[10,0.3px],[11,0.3px],[12,0.75px]]

styles:
    highway-dashed:
        base: lines
        dash: [1,1]
        dash_background_color: [0.086,0.149,0.290]
        shaders:
            blocks:
                position: |
                    v_texcoord.y *= 4.;
    roads-glow:
        base: lines
        mix: [lines-glow]
        shaders:
            defines:
                GLOW_WIDTH: 0.1
                GLOW_BRIGHTNESS: .25
                GLOW_GLOW: .75

    highway-glow:
        base: lines
        mix: [lines-glow]
        shaders:
            defines:
                GLOW_WIDTH: 0.4
                GLOW_BRIGHTNESS: .18
                GLOW_GLOW: .65
