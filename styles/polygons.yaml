import:
    # Blocks
    - ../blocks/elevation/stripes.yaml
    - ../blocks/elevation/contours.yaml
    - ../blocks/polygons/dots.yaml
    - ../blocks/polygons/shimmering.yaml
    - ../blocks/polygons/stripes.yaml
    - ../blocks/polygons/diagonal-stripes.yaml
    - ../blocks/polygons/diagonal-grid.yaml
    # Utils
    - ../blocks/geometry/normal.yaml
    # Custom Commons
    - ./common.yaml

styles:
    polygons-linewall:
        base: polygons
        mix: [geometry-normal]
        texcoords: true
        blend: add
        shaders:
            blocks:
                color: |
                    if (isWall()) {
                        float lineWidth = 0.003*(u_tile_origin.z/20.0);
                        color = mix(vec4(0.),
                                    color,
                                    1.0-(step(lineWidth,v_texcoord.x)-step(1.0-lineWidth,v_texcoord.x))*
                                        (step(lineWidth,v_texcoord.y)-step(1.0-lineWidth,v_texcoord.y)) );
                    } else {
                        color = vec4(0.);
                    }
    elevation-color-contours:
        mix: [tron-palette, elevation-contours]
        animated: true
        shaders:
            defines:
                CONTOURS_PALETTE_RANGE: 2.
                CONTOURS_BACKGROUND_COLOR: vec3(0.)
                CONTOURS_COLOR: palette(normal_elv_raster.a*PI*CONTOURS_PALETTE_RANGE+u_time*.5)
                CONTOURS_SCALE: 60.
                CONTOURS_SPEED: -0.1
                CONTOURS_OFFSET: u_time*CONTOURS_SPEED
